@(form: Form[GpxForm], id: Option[Long] = None, listeCandidats: Seq[(Long, String, Long)] = null)(implicit session: Session, flash: Flash, messages: Messages)
@main() {
  <div class="container">
    <h2></h2>
    @helper.form(action = id.map(routes.GpxController.updateGpx(_)).getOrElse(routes.GpxController.saveGpx), 'enctype -> "multipart/form-data") {
      <fieldset>
        <div hidden>
          @helper.inputText(form("id"))
          @helper.inputText(form("idTrek"))
          @helper.inputText(form("listeMatos"))
          @helper.inputText(form("depart"))
          @helper.inputText(form("arrivee"))
          @helper.inputText(form("coordonneesPix"))
          @helper.inputText(form("typegpx"))
          @helper.inputText(form("nomFichier"))
        </div>
        @helper.inputText(form("titre"), 'size -> 50)
        @helper.inputText(form("sousTitre"), 'size -> 50)
        @helper.inputText(form("heureDebut"))
        @helper.inputText(form("heureFin"))
        @helper.inputText(form("altitudeMinimum"))
        @helper.inputText(form("altitudeMaximum"))
        @helper.inputText(form("ascensionTotale"))
        @helper.inputText(form("descenteTotale"))
        @helper.inputText(form("distanceTotale"))
        @if(form("typegpx").value.getOrElse("R") == "R") {
          <dt><label for="fichierActuel">fichier serveur actuel</label></dt>
          @defining(form("nomFichier").value.getOrElse("aucun")) { nomFic =>
            <dd id="fichierActuel">@if(nomFic.isEmpty) {aucun} else {@nomFic}</dd>
          }
          @helper.select(form("listeFichiers"),
            listeCandidats.map(f => (f._2, f._2)), '_label -> "nouveau fichier serveur")
          <dt><label for="monFichier">nouveau fichier local</label></dt>
          <dd><input id="monFichier" name="monFichier" type="file"></dd>
        } else {
          <dl class=" " id="listeFichiers_field">
            <dt><label for="listeFichiers">listeFichiers</label></dt>
            <dd>
              <select id="listeFichiers" name="listeFichiers[]" multiple="multiple">
                @for(f <- listeCandidats) {
                  @if(f._3.toString == form("id").value.get) {
                    <option value="@f._1.toString,@f._2" selected>@f._2</option>
                    } else {
                    <option value="@f._1.toString,@f._2">@f._2</option>
                  }
                }
              </select>
            </dd>
          </dl>
        }
        @helper.textarea(form("description"), 'id -> "mytextarea", 'rows -> 15, 'cols -> 100)
      </fieldset>
      <button type="submit" class="btn btn-primary">
      @id.map(_=> "Modifier").getOrElse("Cr√©er")
      </button>
    }
  </div>
  <script type="text/javascript">
      editeur()
  </script>
}
